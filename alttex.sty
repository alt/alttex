%%
%% This is file `alttex.sty',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% alttex.dtx  (with options: `package')
%% alttex: writing alternatively
%% Author: Arno L. Trautmann, mail: arno dot trautmann at gmx dot de
%%

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{alttex}[]
\ProvidesPackage{alttex}

\RequirePackage{amsmath}
\let\oldpackage\usepackage
\def\usepackage#1{
  \IfFileExists{#1.sty}{
    \oldpackage{#1}
  }{
    \immediate\write18{tlmgr install #1}
  }
}
\RequirePackage{exscale}
\RequirePackage{ifxetex}
\RequirePackage{hhline}
\ifxetex
\typeout{Loading XeTeX, everything’s fine.}
\else
  \typeout{^^J%
  !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!^^J%
  ! This package can only be compiled with XeLaTeX.^^J%
  ! pdfLaTeX cannot handle unicode the way it is used here.^^J%
  ! If you want to have support for [utf8]inputenc, please contact the author.^^J%
  ! If you want to use LuaLaTeX, give it a try:^^J%
  ! comment out the lines 32,33,35–43.^^J%
  ! Please e-mail me the result of your experiences!^^J%
  !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!^^J%
  }
  \errmessage{No XeLaTeX, no alttex. See the log for more information.}
  \endinput
\fi

\def\noescape{
  \catcode`\_= 11%
  \catcode`\^= 11%
  \catcode`\#= 11%
  \catcode`\&= 11%
  %\catcode`\{= 11%
  %\catcode`\}= 11%
  \catcode`\$= 11%
  \catcode`\~= 11%
  \makeatletter%
  \catcode`\%= 11
}
\def\oldescape{
  \catcode`\%= 14%
  \catcode`\_= 8%
  \catcode`\^= 7%
  \catcode`\#= 6%
  \catcode`\&= 4%
  %\catcode`\{= 1%
  %\catcode`\}= 2%
  \catcode`\$= 3%
  \catcode`\~= 13%
  \makeatother%
}
\def\–{\hhline}
\def\={\hhline}
\def\exceltabular#1{
  \catcode`\^^I=4\relax
  \eolintabular%
  \begin{tabular}{|c|c|c|}\hline%
  \input{#1}%
  \end{tabular}%
  \catcode`\^^M=5\relax
}
\def\mybreak{\\\hline}
\begingroup
  \lccode`\~=`\^^M%
\lowercase{%
  \endgroup
  \def\eolintabular{%
    \catcode`\^^M=\active
    \let~\mybreak
  }%
}

\makeatletter
\def\resetMathstrut@{%
    \setbox\z@\hbox{%
      \mathchardef\@tempa\mathcode`\[\relax
      \def\@tempb##1"##2##3{\the\textfont"##3\char"}%
      \expandafter\@tempb\meaning\@tempa \relax
    }%
  \ht\Mathstrutbox@\ht\z@ \dp\Mathstrutbox@\dp\z@
}
\makeatother

{\catcode`(\active \xdef({\left\string(}}
{\catcode`)\active \xdef){\right\string)}}

\def\newbraces{
  \mathcode`("8000
  \mathcode`)"8000
}

\edef\oldbraces{
  \mathcode`(\the\mathcode`(
  \mathcode`)\the\mathcode`)
}
\def\hugedisplaymath{
  \makeatletter
    \makeatother
  \Huge
    \begin{equation*}
}
\def\endhugedisplaymath{
  \end{equation*}
}
\makeatletter
\def\altmath#1#2{%
  \expandafter\ifx\csname cc\string#1\endcsname\relax
    \add@special{#1}%
    \expandafter
    \xdef\csname cc\string#1\endcsname{\the\catcode`#1}%
    \begingroup
      \catcode`\~\active  \lccode`\~`#1%
      \lowercase{%
      \global\expandafter\let
         \csname ac\string#1\endcsname~%
      \expandafter\gdef\expandafter~\expandafter{#2}}%
    \endgroup
    \global\catcode`#1\active
  \else
  \fi
}
\makeatother
\def\makealtmath{
\altmath{α}\alpha
\altmath{β}\beta
\altmath{γ}\gamma
\altmath{δ}\delta

\altmath{⇒}\Rightarrow
\altmath{⇐}\Leftarrow
\altmath{⇔}\Leftrightarrow

\altmath{∫}\int
\altmath{∀}\forall
}
\let\oldunderscore_\relax
\let\oldhat^\relax
\catcode`\_=13
\def_{%
  \ifmmode
    \catcode`\ =2\relax%
    \catcode`\^^M=2\relax%
    \expandafter\oldunderscore\bgroup%
  \else%
    \textunderscore%
  \fi%
}

\iffalse
This does not work so far…
\catcode`\^=13
\def^{%
  \ifmmode
    \catcode`\ =2\relax%
    \catcode`\^^M=2\relax%
    \expandafter\oldhat\bgroup%
  \else%
    \oldhat%
  \fi%
}
\fi
\let\advancedunderscore_
\def\oldUnder{
  \global\catcode`\_=8\relax
}
\def\newUnder{
  \global\let_\advancedunderscore
}
\def\outside{o}
\def\inside{i}
\let\insideitemizei\outside
\let\insideitemizeii\outside
\def\altenditemize{
  \if\altlastitem 1%
    \let\altlastitem0%
  \else%
    \end{itemize}%
    \let\insideitemizei\outside%
  \fi%
}

\begingroup
  \lccode`\~=`\^^M%
\lowercase{%
  \endgroup
  \def\makeenteractive{%
    \catcode`\^^M=\active
    \let~\altenditemize
}%
}

\def\newitemi{%
  \ifx\insideitemizei\inside%
    \let\altlastitem1%
    \expandafter\item%
  \else%
    \begin{itemize}%
    \let\insideitemizei\inside%
    \let\altlastitem1%
    \makeenteractive%
    \expandafter\item%
  \fi
}

\def\newitemii{
  \ifx\insideitemizeii\inside
    \expandafter\item%
  \else
    \begin{itemize}
      \let\insideitemizeii\inside
      \expandafter\item%
  \fi
}
\makeatletter
\def\makeitemi#1{%
  \expandafter\ifx\csname cc\string#1\endcsname\relax
    \add@special{#1}%
    \expandafter
    \xdef\csname cc\string#1\endcsname{\the\catcode`#1}%
    \begingroup
      \catcode`\~\active  \lccode`\~`#1%
      \lowercase{%
      \global\expandafter\let
         \csname ac\string#1\endcsname~%
      \expandafter\gdef\expandafter~\expandafter{\newitemi}}%
    \endgroup
    \global\catcode`#1\active
  \else
  \fi
}

\def\makeitemii#1{%
  \expandafter\ifx\csname cc\string#1\endcsname\relax
    \add@special{#1}%
    \expandafter
    \xdef\csname cc\string#1\endcsname{\the\catcode`#1}%
    \begingroup
      \catcode`\~\active  \lccode`\~`#1%
      \lowercase{%
      \global\expandafter\let
         \csname ac\string#1\endcsname~%
      \expandafter\gdef\expandafter~\expandafter{\newitemii}}%
    \endgroup
    \global\catcode`#1\active
  \else
  \fi
}
\def\add@special#1{%
  \rem@special{#1}%
  \expandafter\gdef\expandafter\dospecials\expandafter
{\dospecials \do #1}%
  \expandafter\gdef\expandafter\@sanitize\expandafter
{\@sanitize \@makeother #1}}
\def\rem@special#1{%
  \def\do##1{%
    \ifnum`#1=`##1 \else \noexpand\do\noexpand##1\fi}%
  \xdef\dospecials{\dospecials}%
  \begingroup
    \def\@makeother##1{%
      \ifnum`#1=`##1 \else \noexpand\@makeother\noexpand##1\fi}%
    \xdef\@sanitize{\@sanitize}%
  \endgroup}
\makeatother
\def\¹{\end{enumerate}}
\def\²{\end{enumerate}}

\let\insideenumi\outside
\let\insideenumii\outside

\def\newenumi{
  \ifx\insideenumi\inside
    \expandafter\item%
  \else
    \begin{enumerate}
      \let\insideenumi\inside
      \expandafter\item%
  \fi
}

\def\newenumii{
  \ifx\insideenumii\inside
    \expandafter\item%
  \else
    \begin{enumerate}
      \let\insideenumii\inside
      \expandafter\item%
  \fi
}

\makeatletter
\def\makeenumi#1{%
  \expandafter\ifx\csname cc\string#1\endcsname\relax
    \add@special{#1}%
    \expandafter
    \xdef\csname cc\string#1\endcsname{\the\catcode`#1}%
    \begingroup
      \catcode`\~\active  \lccode`\~`#1%
      \lowercase{%
      \global\expandafter\let
         \csname ac\string#1\endcsname~%
      \expandafter\gdef\expandafter~\expandafter{\newenumi}}%
    \endgroup
    \global\catcode`#1\active
  \else
  \fi
}

\def\makeenumii#1{%
  \expandafter\ifx\csname cc\string#1\endcsname\relax
    \add@special{#1}%
    \expandafter
    \xdef\csname cc\string#1\endcsname{\the\catcode`#1}%
    \begingroup
      \catcode`\~\active  \lccode`\~`#1%
      \lowercase{%
      \global\expandafter\let
         \csname ac\string#1\endcsname~%
      \expandafter\gdef\expandafter~\expandafter{\newenumii}}%
    \endgroup
    \global\catcode`#1\active
  \else
  \fi
}
\makeatother

\makeitemi•
\makeitemii‣
\makeenumi¹
\makeenumii²
  % Everything you have to know about \XeLaTeX\ to use this package: Write your \LaTeX\ file just as you are used to. But save it as utf8-encoded, and say
\endinput
%%
%% End of file `alttex.sty'.
